// ===========================================================================
//
// Styles for combat in svg
//
// ===========================================================================
// --------------------------------------
// keyframes
// --------------------------------------
@include keyframes(targetHover) {
    0% {
        opacity: 0.5;
        fill-opacity: 0.2;
        stroke-width: 2px;
    }
    100% {
        opacity: 1;
        fill-opacity: 1;
        stroke-width: 5px;
    }
}

@include keyframes(targetHoverInactive) {
    0% {
        opacity: 0.6;
        stroke-width: 2px;
    }
    100% {
        opacity: 0.9;
        stroke-width: 5px;
    }
}
@include keyframes(targetHoverSelectedInactive) {
    0% {
        stroke-width: 2px;
    }
    100% {
        stroke-width: 4px;
    }
}

// --------------------------------------
// styles
// --------------------------------------
#battle {
    .entity-group-wrapper {
        cursor: pointer
    }

    // circle bg indicator
    // ----------------------------------
    .entity-bg-selection {
        fill: #f0f0f0;
        stroke: #ffffff;
        stroke-width: 2px;
    }

    // ----------------------------------
    // target ring indicator
    // ----------------------------------
    .target-indicator {
        opacity: 0;
        fill: #f0f0f0;
        fill-opacity: 0.5;
        stroke: #ffffff;
        stroke-opacity: 0.8;
        stroke-width: 2px;
    }

    // Only highlight valid targets
    .state-ability.selected-ability-damage.selected-ability-enemy .enemy .target-indicator, 
    .state-ability.selected-ability-damage.selected-ability-player .player .target-indicator {
        fill: #dd2222;
    }
    .state-ability.selected-ability-heal.selected-ability-player .player .target-indicator,
    .state-ability.selected-ability-heal.selected-ability-enemy .enemy .target-indicator {
        fill: #22dd22;
    }

    .entity-hover .target-indicator {
        @include animation(targetHoverInactive 0.2s infinite alternate);
        @include transition("stroke-width 0.5s");
    }
    .entity-selected .target-indicator {
        // SELECTED - NON HOVER
        // entity is selected
        @include animation(targetHoverSelectedInactive 0.4s infinite alternate);
        opacity: 1;
        fill: $COLOR-INTERACTION-SELECTED;
        fill-opacity: 0.6;
        stroke: $COLOR-INTERACTION-SELECTED;
        stroke-opacity: 1;
        stroke-width: 1px;
    }
    
    .entity-selected.entity-hover .target-indicator {
        // SELECTED - HOVER
        // entity is selected and user is hovering over them
        @include animation(targetHoverInactive 0.2s infinite alternate);
        opacity: 1;
        fill: $COLOR-INTERACTION-SELECTED;
        fill-opacity: 0.8;
        stroke: $COLOR-INTERACTION-SELECTED;
        stroke-opacity: 1;
        stroke-width: 5px;
    }

    .state-ability .entity-hover .target-indicator {
        @include animation(targetHover 0.2s infinite alternate);
    }
    // TODO: invalid target effect

    // ----------------------------------
    // key
    // ----------------------------------
    .key-indicator,  
    .alternative-key-indicator {
        font-size: 2em;
        fill: #ffffff;
        text-shadow: 0 1px 0 #000000;
        @include animation(targetHoverInactive 0.4s infinite alternate);

        circle {
            fill: #ffffff;
            fill-opacity: 1;
        }
    }

    .key-indicator.hidden, 
    .alternative-key-indicator.hidden {
        display: block;
        opacity: 0;
    }


    // --------------------------------------
    //
    // health bar
    //
    // --------------------------------------
    .battle-entity-health .health-bar {
        fill: #dd2222;
    }

    .battle-entity-health .health-bar-border {
        fill: none;
        stroke: #ffffff;
    }

    // Damage text
    .entity-group-text {
        font-size: 1.5em;
        font-weight: bold;
    }

    .entity-group-text.damage.negative {
        fill: #dd3333;
        stroke: #990000;
    }
    .entity-group-text.damage.positive {
        fill: #33dd33;
        stroke: #009900;
    }

    .entity-group-text.damage.neutral {
        fill: #999999;
        stroke: #ffffff;
    }

    // --------------------------------------
    //
    // Timer
    //
    // --------------------------------------
    .timer-bar-border {
        fill: none;
        stroke: #343434;
    }
    .timer-bar {
        fill: #ffffff;
        stroke: none;
    }
}
